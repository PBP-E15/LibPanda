<!DOCTYPE html>
<html>
<head>
    <title>Data</title>
</head>
<body>

<h2>Data Form:</h2>
<table class="table">
  <thead>
    <tr>
      <th scope="col">Judul Buku</th>
      <th scope="col">Pengarang</th>
      <th scope="col">Kategori</th>
      <th scope="col">Tahun Terbit</th>
      <th scope="col"></th>
    </tr>
  </thead>
  <tbody id="formData"></tbody>
</table>

<script>
// Fungsi untuk menampilkan data buku
function displayBooks() {
  // Ambil data buku dari localStorage
  var books = JSON.parse(localStorage.getItem("books")) || [];

  // Dapatkan elemen tbody
  var formData = document.getElementById("formData");

  // Bersihkan tabel sebelum menampilkan data
  formData.innerHTML = '';

  // Loop melalui setiap buku dan tambahkan ke tabel
  for (var i = 0; i < books.length; i++) {
    var row = document.createElement("tr");
    
    var titleCell = document.createElement("td");
    titleCell.textContent = books[i].title;
    row.appendChild(titleCell);
    
    var authorCell = document.createElement("td");
    authorCell.textContent = books[i].author;
    row.appendChild(authorCell);
    
    var categoryCell = document.createElement("td");
    categoryCell.textContent = books[i].category;
    row.appendChild(categoryCell);
    
    var yearCell = document.createElement("td");
    yearCell.textContent = books[i].year;
    row.appendChild(yearCell);

    // Tambahkan tombol hapus
    var deleteCell = document.createElement("td");
    var deleteButton = document.createElement("button");
    deleteButton.textContent = "Hapus";
    
    // Gunakan factory function untuk membuat fungsi onclick
    deleteButton.onclick = makeOnClickFunction(i);

    deleteCell.appendChild(deleteButton);
    row.appendChild(deleteCell);
    
    formData.appendChild(row);
  }
}

// Factory function untuk membuat fungsi onclick
function makeOnClickFunction(index) {
  return function() {
    // Ambil data buku dari localStorage
    var books = JSON.parse(localStorage.getItem("books")) || [];

    // Hapus buku dari array
    books.splice(index, 1);

    // Simpan array buku ke localStorage
    localStorage.setItem("books", JSON.stringify(books));

    // Tampilkan ulang buku
    displayBooks();
  };
}

// Tampilkan buku saat halaman dimuat
displayBooks();
</script>

</body>
</html>